"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SwapFormProvider = exports.formDefaultValues = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_hook_form_1 = require("react-hook-form");
const WidgetProvider_1 = require("../WidgetProvider");
const FormUpdater_1 = require("./FormUpdater");
const types_1 = require("./types");
exports.formDefaultValues = {
    [types_1.SwapFormKey.FromAmount]: '',
    [types_1.SwapFormKey.ToAddress]: '',
    [types_1.SwapFormKey.TokenSearchFilter]: '',
    [types_1.SwapFormKey.ContractOutputsToken]: '',
    [types_1.SwapFormKey.ToContractAddress]: '',
    [types_1.SwapFormKey.ToContractCallData]: '',
    [types_1.SwapFormKey.ToContractGasLimit]: '',
    [types_1.SwapFormKey.ToAmount]: '',
};
const SwapFormProvider = ({ children, }) => {
    const { fromChain, fromToken, fromAmount, toChain, toToken, toAddress } = (0, WidgetProvider_1.useWidgetConfig)();
    const defaultValues = (0, react_1.useMemo)(() => ({
        ...exports.formDefaultValues,
        fromChain,
        fromToken,
        fromAmount: (typeof fromAmount === 'number'
            ? fromAmount?.toPrecision()
            : fromAmount) || exports.formDefaultValues.fromAmount,
        toChain,
        toToken,
        toAddress: toAddress || exports.formDefaultValues.toAddress,
    }), [fromAmount, fromChain, fromToken, toAddress, toChain, toToken]);
    const methods = (0, react_hook_form_1.useForm)({
        // values,
        defaultValues,
    });
    return ((0, jsx_runtime_1.jsxs)(react_hook_form_1.FormProvider, { ...methods, children: [(0, jsx_runtime_1.jsx)(FormUpdater_1.FormUpdater, { defaultValues: defaultValues }), children] }));
};
exports.SwapFormProvider = SwapFormProvider;
